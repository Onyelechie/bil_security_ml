## Alembic Migrations Directory

This folder contains database migration scripts managed by [Alembic](https://alembic.sqlalchemy.org/).

### Purpose
Alembic is used to track and apply changes to the database schema over time. Each migration script in `versions/` represents a change (or set of changes) to the schema.

### Common Commands
- **Create a new migration:**
	```bash
	python -m alembic revision --autogenerate -m "<description>"
	```
- **Apply migrations:**
	```bash
	python -m alembic upgrade head
	```

### Notes
- Migration scripts are auto-generated but should be reviewed and edited for accuracy.
- See the project `README.md` for full setup and workflow details.

### Recent migration notes
- `add_edge_pc_id_fk_to_alerts_20260223.py` added `edge_pc_id` column and FK to `edge_pcs`.
 - `enforce_edge_pc_id_not_null_20260223.py` backfills existing alerts to a sentinel `edge_pc_id='edge-001'`
	and enforces `NOT NULL` using SQLite-safe batch operations.

If you maintain a Postgres production DB, prefer testing these migrations on a staging database
before applying to production. The migrations include safeguards for local SQLite development.